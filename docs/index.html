<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Echo - Offline Voice Input for Apple Silicon</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;600;700&family=Plus+Jakarta+Sans:wght@400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --color-void: #FAF8F5;
            --color-surface: #FFFFFF;
            --color-surface-elevated: #F7F6F3;
            --color-text-primary: #2D2D2D;
            --color-text-secondary: #6B6B6B;
            --color-text-tertiary: #9A9A9A;
            --color-border: #E8E4DF;
            --color-border-subtle: #F0EFEC;
            --color-accent: #7C9070;
            --color-recording: #C67D63;
            --color-processing: #D4A574;
            --font-display: 'Fraunces', Georgia, serif;
            --font-body: 'Plus Jakarta Sans', -apple-system, sans-serif;
            --font-mono: 'IBM Plex Mono', monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: var(--color-void);
            color: var(--color-text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Hero Section */
        .hero {
            padding: 80px 30px 60px;
            max-width: 900px;
            margin: 0 auto;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out 0.1s forwards;
        }

        .hero-logo {
            width: 80px;
            height: 80px;
            margin-bottom: 32px;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out 0.1s forwards;
        }

        .hero-title {
            font-family: var(--font-display);
            font-size: clamp(48px, 8vw, 72px);
            font-weight: 600;
            line-height: 1.1;
            letter-spacing: -0.02em;
            margin-bottom: 16px;
            color: var(--color-text-primary);
        }

        .hero-subtitle {
            font-family: var(--font-display);
            font-size: clamp(18px, 2.5vw, 24px);
            font-weight: 400;
            color: var(--color-text-secondary);
            margin-bottom: 32px;
            letter-spacing: -0.01em;
        }

        .hero-description {
            font-size: 16px;
            max-width: 560px;
            color: var(--color-text-secondary);
            line-height: 1.8;
            margin-bottom: 40px;
        }

        /* Version Badge */
        .version-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 100px;
            font-family: var(--font-mono);
            font-size: 12px;
            color: var(--color-text-secondary);
            margin-bottom: 60px;
        }

        .version-badge .dot {
            width: 6px;
            height: 6px;
            background: var(--color-accent);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        /* Features Section */
        .features {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 30px 60px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out 0.3s forwards;
        }

        .feature {
            padding: 24px;
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 16px;
            transition: all 0.3s ease;
        }

        .feature:hover {
            border-color: var(--color-border);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.04);
            transform: translateY(-2px);
        }

        .feature-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--color-surface-elevated);
            border-radius: 10px;
            margin-bottom: 16px;
            font-size: 18px;
            color: var(--color-accent);
        }

        .feature-title {
            font-family: var(--font-display);
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--color-text-primary);
        }

        .feature-text {
            font-size: 14px;
            color: var(--color-text-secondary);
            line-height: 1.6;
        }

        /* Download Section */
        .download-section {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 30px 80px;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out 0.4s forwards;
        }

        .download-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.04);
        }

        .download-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .platform-icon {
            font-size: 32px;
            color: var(--color-text-primary);
        }

        .download-title {
            font-family: var(--font-display);
            font-size: 24px;
            font-weight: 600;
            color: var(--color-text-primary);
        }

        .download-note {
            font-size: 14px;
            color: var(--color-text-secondary);
            margin-top: 4px;
        }

        .download-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .download-btn {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            background: var(--color-surface-elevated);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            color: var(--color-text-primary);
            text-decoration: none;
            font-weight: 500;
            font-size: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            font-family: var(--font-body);
        }

        .download-btn:hover {
            background: var(--color-text-primary);
            border-color: var(--color-text-primary);
            color: var(--color-surface);
        }

        .download-btn .arrow {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--color-text-tertiary);
            transition: all 0.3s ease;
        }

        .download-btn:hover .arrow {
            color: var(--color-surface);
        }

        .download-btn[href="#"] {
            opacity: 0.4;
            pointer-events: none;
        }

        /* Requirements Section */
        .requirements {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 30px 60px;
            opacity: 0;
            animation: fadeInUp 0.8s ease-out 0.5s forwards;
        }

        .requirements-title {
            font-family: var(--font-mono);
            font-size: 11px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--color-text-tertiary);
            margin-bottom: 16px;
        }

        .requirements-list {
            display: flex;
            flex-wrap: wrap;
            gap: 24px;
        }

        .requirement {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--color-text-secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .requirement-icon {
            color: var(--color-accent);
        }

        /* Footer */
        .footer {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 30px;
            border-top: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .footer-links {
            display: flex;
            gap: 24px;
            flex-wrap: wrap;
            align-items: center;
        }

        .footer-link {
            color: var(--color-text-secondary);
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-link:hover {
            color: var(--color-text-primary);
        }

        /* Language Switcher */
        .lang-switch {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            background: var(--color-surface-elevated);
            border: 1px solid var(--color-border);
            border-radius: 100px;
            font-family: var(--font-mono);
            font-size: 12px;
            color: var(--color-text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            -webkit-user-select: none;
            user-select: none;
        }

        .lang-switch:hover {
            border-color: var(--color-accent);
            color: var(--color-text-primary);
        }

        .lang-switch i {
            font-size: 11px;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.4;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero {
                padding: 60px 20px 40px;
            }

            .features {
                padding: 0 20px 40px;
                grid-template-columns: 1fr;
            }

            .download-section {
                padding: 0 20px 60px;
            }

            .download-card {
                padding: 24px;
            }

            .requirements {
                padding: 0 20px 40px;
            }

            .requirements-list {
                flex-direction: column;
                gap: 12px;
            }

            .footer {
                padding: 30px 20px;
                flex-direction: column;
                align-items: flex-start;
            }

            .footer-links {
                flex-direction: column;
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="hero">
        <svg class="hero-logo" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="0" y="0" width="100" height="100" rx="22" fill="#7C9082"/>
            <ellipse cx="50" cy="50" rx="36" ry="36" stroke="rgba(255,255,255,0.3)" stroke-width="2" fill="none"/>
            <ellipse cx="50" cy="50" rx="28" ry="28" stroke="rgba(255,255,255,0.5)" stroke-width="2.5" fill="none"/>
            <ellipse cx="50" cy="50" rx="20" ry="20" stroke="rgba(255,255,255,0.7)" stroke-width="3" fill="none"/>
            <ellipse cx="50" cy="50" rx="12" ry="12" fill="#FFFFFF"/>
        </svg>
        <h1 class="hero-title">Echo</h1>
        <p class="hero-subtitle" data-i18n="hero.subtitle"></p>
        <p class="hero-description" data-i18n="hero.description"></p>
        <div class="version-badge">
            <span class="dot"></span>
            <span id="version-text" data-i18n="version.checking"></span>
        </div>
    </div>

    <div class="features" id="features-grid"></div>

    <div class="download-section">
        <div class="download-card">
            <div class="download-header">
                <i class="fa-brands fa-apple platform-icon"></i>
                <div>
                    <h2 class="download-title" data-i18n="download.title"></h2>
                    <p class="download-note" data-i18n="download.note"></p>
                </div>
            </div>
            <div class="download-options">
                <a href="#" class="download-btn" id="macos-apple-silicon">
                    <span data-i18n="download.dmg"></span>
                    <span class="arrow">Apple Silicon</span>
                </a>
            </div>
        </div>
    </div>

    <div class="requirements">
        <h3 class="requirements-title" data-i18n="requirements.title"></h3>
        <div class="requirements-list" id="requirements-list"></div>
    </div>

    <footer class="footer">
        <div class="footer-links">
            <a href="https://github.com/qluto/echo/releases" class="footer-link" target="_blank">
                <i class="fa-solid fa-box"></i>
                <span data-i18n="footer.releases"></span>
            </a>
            <a href="https://github.com/qluto/echo" class="footer-link" target="_blank">
                <i class="fa-brands fa-github"></i>
                <span>GitHub</span>
            </a>
            <span class="lang-switch" id="lang-switch" role="button" tabindex="0">
                <i class="fa-solid fa-globe"></i>
                <span id="lang-label"></span>
            </span>
        </div>
    </footer>

    <script>
        // --- i18n ---
        const i18n = {
            en: {
                "hero.subtitle": "Offline Voice Input for Apple Silicon",
                "hero.description": "Transform your voice into text instantly, entirely on your Mac. Echo uses speech recognition models optimized for Apple Silicon to deliver fast, accurate transcription without sending a single byte to the cloud. Press a hotkey, speak, and watch your words appear in any application.",
                "version.checking": "Checking latest version\u2026",
                "version.latest": "{tag} \u00b7 Latest",
                "version.fallback": "Check releases for latest version",
                "download.title": "Download for macOS",
                "download.note": "Requires macOS 14.0+ and Apple Silicon",
                "download.dmg": "Download DMG",
                "requirements.title": "System Requirements",
                "footer.releases": "All Releases",
                "lang.label": "JA",
                features: [
                    { icon: "fa-solid fa-lock", title: "Fully Offline", text: "All processing happens locally on your Mac. No internet required, no data leaves your device." },
                    { icon: "fa-solid fa-bolt", title: "Apple Silicon Native", text: "Built specifically for Apple Silicon with lightning-fast on-device inference." },
                    { icon: "fa-solid fa-keyboard", title: "Global Hotkey", text: "Press and hold a system-wide shortcut to record from anywhere. Release to transcribe." },
                    { icon: "fa-solid fa-tower-broadcast", title: "Always-On Listening", text: "Continuous transcription mode with voice activity detection. Speaks are captured automatically in the background." },
                    { icon: "fa-solid fa-wand-magic-sparkles", title: "LLM Post-Processing", text: "Optional AI cleanup removes filler words and self-corrections, with context-aware formatting per app." },
                    { icon: "fa-solid fa-paste", title: "Auto Insert", text: "Transcribed text is automatically pasted into your active application." },
                    { icon: "fa-solid fa-language", title: "50+ Languages", text: "Support for major world languages with automatic language detection." },
                    { icon: "fa-solid fa-clock-rotate-left", title: "Transcription History", text: "Full-text searchable history for all your always-on transcriptions, stored locally." },
                    { icon: "fa-solid fa-sliders", title: "Model Choice", text: "Choose between Whisper and Qwen3-ASR models based on your accuracy and speed needs." },
                ],
                requirements: [
                    "macOS 14.0 (Sonoma) or later",
                    "Apple Silicon",
                    "8GB+ RAM recommended",
                    "2GB+ free storage",
                ],
            },
            ja: {
                "hero.subtitle": "Apple Silicon\u5bfe\u5fdc\u30aa\u30d5\u30e9\u30a4\u30f3\u97f3\u58f0\u5165\u529b",
                "hero.description": "声をそのままテキストに。EchoはApple Siliconに最適化された音声認識モデルを使い、クラウドへ一切データを送らずに高速・高精度な文字起こしをMac上で完結します。ホットキーを押して話すだけで、どのアプリにもテキストが入力されます。",
                "version.checking": "\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u4e2d\u2026",
                "version.latest": "{tag} \u00b7 \u6700\u65b0",
                "version.fallback": "\u30ea\u30ea\u30fc\u30b9\u30da\u30fc\u30b8\u3067\u6700\u65b0\u7248\u3092\u78ba\u8a8d",
                "download.title": "macOS\u7248\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9",
                "download.note": "macOS 14.0\u4ee5\u964d + Apple Silicon\u304c\u5fc5\u8981\u3067\u3059",
                "download.dmg": "DMG\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9",
                "requirements.title": "\u30b7\u30b9\u30c6\u30e0\u8981\u4ef6",
                "footer.releases": "\u5168\u30ea\u30ea\u30fc\u30b9",
                "lang.label": "EN",
                features: [
                    { icon: "fa-solid fa-lock", title: "\u5b8c\u5168\u30aa\u30d5\u30e9\u30a4\u30f3", text: "\u3059\u3079\u3066\u306e\u51e6\u7406\u306fMac\u4e0a\u3067\u5b8c\u7d50\u3002\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0d\u8981\u3001\u30c7\u30fc\u30bf\u304c\u5916\u90e8\u306b\u51fa\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002" },
                    { icon: "fa-solid fa-bolt", title: "Apple Siliconネイティブ", text: "Apple Silicon専用に設計された高速なオンデバイス推論。" },
                    { icon: "fa-solid fa-keyboard", title: "\u30b0\u30ed\u30fc\u30d0\u30eb\u30db\u30c3\u30c8\u30ad\u30fc", text: "\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u3067\u4f7f\u3048\u308b\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3067\u3069\u3053\u304b\u3089\u3067\u3082\u9332\u97f3\u3002\u96e2\u3059\u3068\u6587\u5b57\u8d77\u3053\u3057\u304c\u958b\u59cb\u3057\u307e\u3059\u3002" },
                    { icon: "fa-solid fa-tower-broadcast", title: "\u5e38\u6642\u30ea\u30b9\u30cb\u30f3\u30b0", text: "\u97f3\u58f0\u6d3b\u52d5\u691c\u51fa\u306b\u3088\u308b\u9023\u7d9a\u6587\u5b57\u8d77\u3053\u3057\u30e2\u30fc\u30c9\u3002\u767a\u8a71\u3092\u81ea\u52d5\u3067\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u30ad\u30e3\u30d7\u30c1\u30e3\u3057\u307e\u3059\u3002" },
                    { icon: "fa-solid fa-wand-magic-sparkles", title: "LLM\u30dd\u30b9\u30c8\u30d7\u30ed\u30bb\u30b9", text: "AI\u304c\u30d5\u30a3\u30e9\u30fc\u30ef\u30fc\u30c9\u3084\u8a00\u3044\u76f4\u3057\u3092\u81ea\u52d5\u9664\u53bb\u3002\u30a2\u30d7\u30ea\u3054\u3068\u306b\u6587\u4f53\u3092\u8abf\u6574\u3057\u307e\u3059\u3002" },
                    { icon: "fa-solid fa-paste", title: "\u81ea\u52d5\u633f\u5165", text: "\u6587\u5b57\u8d77\u3053\u3057\u7d50\u679c\u304c\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30a2\u30d7\u30ea\u306b\u81ea\u52d5\u3067\u30da\u30fc\u30b9\u30c8\u3055\u308c\u307e\u3059\u3002" },
                    { icon: "fa-solid fa-language", title: "50\u4ee5\u4e0a\u306e\u8a00\u8a9e\u306b\u5bfe\u5fdc", text: "\u4e3b\u8981\u306a\u4e16\u754c\u306e\u8a00\u8a9e\u3092\u30b5\u30dd\u30fc\u30c8\u3002\u81ea\u52d5\u8a00\u8a9e\u691c\u51fa\u6a5f\u80fd\u4ed8\u304d\u3002" },
                    { icon: "fa-solid fa-clock-rotate-left", title: "\u6587\u5b57\u8d77\u3053\u3057\u5c65\u6b74", text: "\u5e38\u6642\u30ea\u30b9\u30cb\u30f3\u30b0\u306e\u5168\u5c65\u6b74\u3092\u30ed\u30fc\u30ab\u30eb\u306b\u4fdd\u5b58\u3002\u5168\u6587\u691c\u7d22\u306b\u3082\u5bfe\u5fdc\u3002" },
                    { icon: "fa-solid fa-sliders", title: "\u30e2\u30c7\u30eb\u9078\u629e", text: "Whisper\u3068Qwen3-ASR\u304b\u3089\u7cbe\u5ea6\u3068\u901f\u5ea6\u306e\u30d0\u30e9\u30f3\u30b9\u306b\u5408\u308f\u305b\u3066\u9078\u3079\u307e\u3059\u3002" },
                ],
                requirements: [
                    "macOS 14.0 (Sonoma) \u4ee5\u964d",
                    "Apple Silicon",
                    "8GB\u4ee5\u4e0a\u306eRAM\u63a8\u5968",
                    "2GB\u4ee5\u4e0a\u306e\u7a7a\u304d\u5bb9\u91cf",
                ],
            },
        };

        // --- State ---
        let currentLang = "en";

        function detectLang() {
            const stored = localStorage.getItem("echo-lang");
            if (stored && i18n[stored]) return stored;
            const nav = navigator.language || navigator.userLanguage || "en";
            return nav.startsWith("ja") ? "ja" : "en";
        }

        function t(key) {
            return i18n[currentLang][key] || i18n.en[key] || key;
        }

        // --- Render ---
        function renderPage() {
            document.documentElement.lang = currentLang;
            document.title = currentLang === "ja"
                ? "Echo - Apple Silicon\u5bfe\u5fdc\u30aa\u30d5\u30e9\u30a4\u30f3\u97f3\u58f0\u5165\u529b"
                : "Echo - Offline Voice Input for Apple Silicon";

            document.querySelectorAll("[data-i18n]").forEach(el => {
                const key = el.getAttribute("data-i18n");
                el.textContent = t(key);
            });

            // Features
            const grid = document.getElementById("features-grid");
            grid.innerHTML = "";
            t("features").forEach(f => {
                const div = document.createElement("div");
                div.className = "feature";
                div.innerHTML = `
                    <div class="feature-icon"><i class="${f.icon}"></i></div>
                    <h3 class="feature-title">${f.title}</h3>
                    <p class="feature-text">${f.text}</p>`;
                grid.appendChild(div);
            });

            // Requirements
            const reqList = document.getElementById("requirements-list");
            reqList.innerHTML = "";
            t("requirements").forEach(r => {
                const div = document.createElement("div");
                div.className = "requirement";
                div.innerHTML = `<span class="requirement-icon"><i class="fa-solid fa-check"></i></span><span>${r}</span>`;
                reqList.appendChild(div);
            });

            // Language switch label
            document.getElementById("lang-label").textContent = t("lang.label");
        }

        function setLang(lang) {
            currentLang = lang;
            localStorage.setItem("echo-lang", lang);
            renderPage();
        }

        // --- GitHub Releases ---
        async function loadLatestRelease() {
            try {
                const response = await fetch("https://api.github.com/repos/qluto/echo/releases/latest");
                if (!response.ok) throw new Error("Failed to fetch releases");
                const release = await response.json();

                const versionText = document.getElementById("version-text");
                versionText.textContent = t("version.latest").replace("{tag}", release.tag_name);
                versionText.setAttribute("data-tag", release.tag_name);

                const platformMap = {
                    "macos-apple-silicon": (name) => name.includes("aarch64") && name.endsWith(".dmg"),
                };

                release.assets.forEach(asset => {
                    const fileName = asset.name.toLowerCase();
                    Object.entries(platformMap).forEach(([btnId, matcher]) => {
                        if (matcher(fileName)) {
                            const btn = document.getElementById(btnId);
                            if (btn) {
                                btn.href = asset.browser_download_url;
                                btn.style.opacity = "1";
                                btn.style.pointerEvents = "auto";
                            }
                        }
                    });
                });
            } catch (error) {
                console.error("Error loading releases:", error);
                const versionText = document.getElementById("version-text");
                versionText.textContent = t("version.fallback");
            }
        }

        // Re-translate version badge when language switches
        function updateVersionBadge() {
            const versionText = document.getElementById("version-text");
            const tag = versionText.getAttribute("data-tag");
            if (tag) {
                versionText.textContent = t("version.latest").replace("{tag}", tag);
            }
        }

        // --- Init ---
        document.addEventListener("DOMContentLoaded", () => {
            currentLang = detectLang();
            renderPage();
            loadLatestRelease();

            const langSwitch = document.getElementById("lang-switch");
            langSwitch.addEventListener("click", () => {
                setLang(currentLang === "en" ? "ja" : "en");
                updateVersionBadge();
            });
            langSwitch.addEventListener("keydown", (e) => {
                if (e.key === "Enter" || e.key === " ") {
                    e.preventDefault();
                    langSwitch.click();
                }
            });
        });
    </script>
</body>
</html>
